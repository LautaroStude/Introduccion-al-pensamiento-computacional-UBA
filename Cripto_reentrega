def leer_archivo(nombre):
    with open(nombre, "r", encoding="utf-8") as archivo:
        texto = archivo.read()

    return texto

def obtener_indice(caracter,cadena):
    i = 0
    while not caracter == cadena[i]:
        i += 1
    return i
            
def codificar_caracter(letra, alfabeto, k):    
    posicion = obtener_indice(letra, alfabeto)
    cifrado = alfabeto[(posicion + k) % len(alfabeto)]
    
    return cifrado
    
def normalizar(mensaje):
    nuevo_mensaje = ""
    i = 0
    while i < len(mensaje):
        if mensaje[i] == "á":
            nuevo_mensaje = nuevo_mensaje + "a"
        
        elif mensaje[i] == "é":
            nuevo_mensaje = nuevo_mensaje + "e"
        
        elif mensaje[i] == "í":
            nuevo_mensaje = nuevo_mensaje + "i"
            
        elif mensaje[i] == "ó":
            nuevo_mensaje = nuevo_mensaje + "o"
            
        elif mensaje[i] == "ú":
            nuevo_mensaje = nuevo_mensaje + "u"
            
        elif mensaje[i] == "ü":
            nuevo_mensaje = nuevo_mensaje + "u"
        else:  
            nuevo_mensaje = nuevo_mensaje + mensaje[i]
        i = i + 1
        
    return nuevo_mensaje.lower()

def codificar(mensaje, alfabeto, k):
    mensaje = normalizar(mensaje)
    codificado = ""
    i = 0
    
    while i < len(mensaje):
        if mensaje[i] in alfabeto:
            codificado = codificado + codificar_caracter(mensaje[i], alfabeto, k)
        else:
            codificado = codificado + mensaje[i]
        i = i + 1
    return codificado         

def decodificar_caracter(letra, alfabeto, k):
    posicion = obtener_indice(letra, alfabeto)
    descifrado = alfabeto[(posicion - k) % len(alfabeto)]
    
    return descifrado
    
def decodificar(mensaje, alfabeto, k):
    mensaje = normalizar(mensaje)
    decodificado = ""
    i = 0
    
    while i < len(mensaje):
        if mensaje[i] in alfabeto:
            decodificado = decodificado + decodificar_caracter(mensaje[i], alfabeto, k)
        else:
            decodificado = decodificado + mensaje[i]
        i = i + 1
    return decodificado

def codificar_archivo(nombre, alfabeto, k):
    texto = leer_archivo(nombre)
    t_codificado = codificar(texto, alfabeto, k)
    with open(nombre, 'w', encoding="utf-8") as archivo:
        archivo.write(t_codificado)
        archivo.close()
    
    return t_codificado
    